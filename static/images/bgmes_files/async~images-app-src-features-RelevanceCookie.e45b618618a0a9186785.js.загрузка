(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["18537b"],{"/rgM":function(e,t,n){},"2GLw":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("f3eo"),a=n("PBAA"),o=function(){return a.a?new r.yCookies(".".concat(window.location.hostname)):void 0}},B0Hq:function(e,t,n){},Bhso:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("PBAA"),a=n("Qa6K"),o=n("G48W"),c="fiji:ls-availability-test",i=!1;if(r.a)try{localStorage.setItem(c,"1"),localStorage.removeItem(c),i=!0}catch(u){var l=Object(o.b)("project");Object(a.a)("/".concat(l,"/no-localstorage"))}var s=i},D1t3:function(e,t,n){},DvqP:function(e,t,n){},EVYq:function(e,t,n){},PH0m:function(e,t,n){},Rk95:function(e,t,n){},Y70h:function(e,t,n){"use strict";n.r(t),n.d(t,"RelevanceCookie",(function(){return Rt}));var r,a,o,c=n("iolB"),i=n("QOMy"),l=n("OfX1"),s=n("ww0C"),u=Object(s.a)("relevanceCookie"),f=n("cDcd"),b=n("Mj+e"),d=n("EAP/"),p=n("zy2/"),j=n("+6NG"),h=n("UWoi"),v=n("eAgb"),y=n("UW3g"),O=n("ihlU"),m=n("omwk"),x=n("xEF0"),g=n("4Gwv"),w=n("TbsR"),C=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(i){a={error:i}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return c},k=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},D=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];void 0!==e&&e.apply(void 0,k([],C(n),!1)),t.apply(void 0,k([],C(n),!1))}},S=n("1iq3"),P=n("Xd8z"),R=(n("DvqP"),Object(p.createClassNameModifier)(Object(P.a)(),{theme:"bright"})),A=Object(g.g)({desktop:R}),N=Object(g.g)({desktop:function(e){return e}}),T=n("vwZL"),E=n("B1u8"),_=n("CfDi"),z=(n("/rgM"),Object(p.withBemMod)(Object(P.a)(),{tone:"blue"})),L=Object(g.g)({desktop:z}),M=n("gyk9"),B=n("Eju5"),I=(n("B0Hq"),Object(p.withBemMod)(Object(P.a)(),{nonvisual:!0})),V=Object(g.g)({desktop:I}),W=n("yn3j"),q=Object(W.cn)("Dropdown"),U=(n("PH0m"),r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),J=function(){return J=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},J.apply(this,arguments)},G=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},H=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(i){a={error:i}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return c},F=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},Q=Object(p.compose)(Object(p.composeU)(A,N,T.a),Object(p.composeU)(_.a,L,M.a),E.a,B.a,V)(S.a),X=function(){},Y=(a=Q,o=function(e){function t(){var t=e.apply(this,F([],H(arguments),!1))||this;return t.state={visible:t.props.visible,prevVisible:t.props.visible},t.defaultDelays={mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15},t.innerRef=Object(f.createRef)(),t.delayTimer=null,t.onClick=function(){t.setPopupVisible(!t.state.visible)},t.onMouseEnter=function(){var e=t.props.mouseEnterDelay;t.delaySetPopupVisible(!0,e||t.defaultDelays.mouseEnterDelay)},t.onMouseLeave=function(){var e=t.props.mouseLeaveDelay;t.delaySetPopupVisible(!1,e||t.defaultDelays.mouseLeaveDelay)},t.onFocus=function(){var e=t.props.focusDelay;t.delaySetPopupVisible(!0,e||t.defaultDelays.focusDelay)},t.onBlur=function(){var e=t.props.blurDelay;t.delaySetPopupVisible(!1,e||t.defaultDelays.blurDelay)},t.onPopupMouseEnter=function(){t.clearDelayTimer()},t.onPopupMouseLeave=function(){var e=t.props.mouseLeaveDelay;t.delaySetPopupVisible(!1,e||t.defaultDelays.mouseLeaveDelay)},t}return U(t,e),t.prototype.componentWillUnmount=function(){this.clearDelayTimer()},t.prototype.delaySetPopupVisible=function(e,t){var n=this;this.clearDelayTimer();var r=1e3*t;this.delayTimer=setTimeout((function(){n.setPopupVisible(e),n.clearDelayTimer()}),r)},t.prototype.setPopupVisible=function(e){var t=this.state.visible,n=this.props.onVisibleChange;this.clearDelayTimer(),t!==e&&(this.setState({visible:e,prevVisible:t}),n(e))},t.prototype.clearDelayTimer=function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)},t.prototype.render=function(){var e=this,t=this.props,n=t.children,r=t.innerContent,o=t.style,c=t.scope,i=(t.onVisibleChange,t.mouseLeaveDelay,t.mouseEnterDelay,t.focusDelay,t.blurDelay,t.trigger),s=G(t,["children","innerContent","style","scope","onVisibleChange","mouseLeaveDelay","mouseEnterDelay","focusDelay","blurDelay","trigger"]),u=f.Children.only(n),b=J(J({},s),{children:r,target:"anchor",anchor:this.innerRef,scope:c||this.innerRef,visible:this.state.visible,onClose:function(){return e.setPopupVisible(!1)}}),d={};-1!==i.indexOf("hover")&&(d.onMouseEnter=D(u.props.onMouseEnter,this.onMouseEnter),d.onMouseLeave=D(u.props.onMouseLeave,this.onMouseLeave),b.onMouseEnter=this.onPopupMouseEnter,b.onMouseLeave=this.onPopupMouseLeave),-1!==i.indexOf("focus")&&(d.onFocus=D(u.props.onFocus,this.onFocus),d.onBlur=D(u.props.onBlur,this.onBlur)),-1!==i.indexOf("click")&&(d.onClick=D(u.props.onClick,this.onClick));var p=Object(f.cloneElement)(u,d);return Object(l.jsxs)("span",{style:o,className:q(),ref:this.innerRef,children:[p,Object(l.jsx)(a,J({},b))]})},t}(f.PureComponent),o.displayName="withDropdown(".concat(Object(w.a)(a),")"),o.defaultProps={onVisibleChange:X,mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,visible:!1,trigger:["hover"],direction:"bottom-start"},o),K=Object(g.c)({desktop:Y},{file:"depot/components/Dropdown/index.ts"}),Z=n("wkgX"),$=n("18eQ"),ee=Object(W.cn)("TumblerAndData"),te=ee(),ne=(n("lJQW"),function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(i){a={error:i}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return c}),re=Object(p.compose)(y.a,Z.a)(j.a),ae=Object(f.memo)((function(e){var t=e.data,n=e.label,r=ne(Object(f.useState)(!1),2),a=r[0],o=r[1],c=Object(f.useCallback)((function(){return o((function(e){return!e}))}),[]);if(!t)return null;var i=ee("Content",{visible:a});return Object(l.jsxs)("div",{className:te,children:[Object(l.jsx)(re,{view:"default",size:"m",checked:a,onChange:c,labelAfter:n}),Object(l.jsx)("div",{className:i,"data-relev-parser":n,dangerouslySetInnerHTML:{__html:t}})]})})),oe=n("AcvJ"),ce=n("amzm"),ie=n("/685"),le=Object(g.g)({desktop:ie.a}),se=n("0hXw"),ue=n("8RJh"),fe=n("1F+w"),be=n("XN7w"),de=n("vkax"),pe=n("y+U/"),je=n("JJbA"),he=Object(W.cn)("TextWithTooltip")(),ve=Object(W.cn)("TooltipTable")(),ye=(n("D1t3"),function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(i){a={error:i}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return c}),Oe=Object(p.compose)(je.a,pe.a)(de.a),me=Object(p.compose)(m.a,be.a)(h.a),xe=Object(f.memo)((function(e){var t=e.text,n=e.children,r=ye(Object(f.useState)(!1),2),a=r[0],o=r[1],c=Object(f.useRef)(null),i=Object(f.useCallback)((function(){return o((function(e){return!e}))}),[]),s=Object(f.useCallback)((function(e,t){"click"===t&&e.target===document.documentElement||o(!1)}),[]);return Object(l.jsxs)("div",{className:he,children:[Object(l.jsx)(me,{controlRef:c,view:"clear",size:"s",onClick:i,children:t}),Object(l.jsx)(Oe,{className:ve,onClose:s,view:"default",size:"s",keepMounted:!0,direction:"bottom",anchor:c,visible:a,children:n})]})})),ge=n("9lnC"),we=n("PNGk"),Ce=n("J8QT"),ke=n("PYvS"),De=Object(p.compose)(fe.a,ge.a)(se.a),Se=Object(p.compose)(Ce.a,ke.a)(we.a),Pe=Object(f.memo)((function(e){var t=e.type,n=e.value,r=e.changeValue,a=e.idx,o=Object(f.useCallback)((function(e){r(a,"bool"===t?!n:e.target.value)}),[a,r,n,t]);switch(t){case"string":return Object(l.jsx)(Se,{size:"m",view:"default",value:n||"",inputMode:"text",onChange:o});case"number":return Object(l.jsx)(Se,{size:"m",view:"default",value:Number(n)||"",inputMode:"numeric",onChange:o});default:return Object(l.jsx)(De,{size:"m",view:"default",checked:Boolean(n),onChange:o})}})),Re=(n("EVYq"),function(){return Re=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Re.apply(this,arguments)}),Ae=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(i){a={error:i}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return c},Ne=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},Te=Object(p.compose)(ue.a,fe.a)(se.a),Ee=Object(W.cn)("CheckboxRow"),_e=Ee(),ze=Ee("Table"),Le=Ee("TableData"),Me=function(e){var t=e.children;return Object(l.jsx)("table",{className:ze,children:Object(l.jsx)("tbody",{children:t})})},Be=function(e){var t=e.rules,n=e.updateData;return Object(l.jsxs)("table",{className:ze,children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"cgi-parametr"}),Object(l.jsx)("th",{children:"value"}),Object(l.jsx)("th",{children:"description"})]})}),Object(l.jsx)("tbody",{children:t.map((function(e){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{className:Le,children:e.cgiParametr}),Object(l.jsx)("td",{className:Le,children:Object(l.jsx)(Pe,{idx:e.idx,value:e.value,type:e.type,changeValue:n})}),Object(l.jsx)("td",{className:Le,children:e.description})]},e.idx)}))})]})},Ie=Object(f.memo)((function(e){var t=e.label,n=e.enabled,r=e.updateData,a=e.idx,o=e.content,c=e.colIdx,i=e.rules,s=Object(f.useCallback)((function(e){r(c,a,e)}),[c,a,r]),u=Object(f.useCallback)((function(){return s((function(e,t){var n=t.findIndex((function(t){return t.idx===e})),r=t[n];return r.enabled=!r.enabled,t[n]=Re({},r),Ne([],Ae(t),!1)}))}),[s]),b=Object(f.useCallback)((function(e,t){return s((function(n,r){var a=r.findIndex((function(e){return e.idx===n})),o=r[a];if(!o.rules)return r;var c=o.rules.findIndex((function(t){return t.idx===e})),i=o.rules[c];return i.value=t,i.changed=i.initValue!==t,o.rules=Ne([],Ae(o.rules),!1),r[a]=Re({},o),Ne([],Ae(r),!1)}))}),[s]);return Object(l.jsxs)("div",{className:_e,children:[Object(l.jsx)(Te,{size:"s",view:"default",onChange:u,checked:n}),Object(l.jsx)(xe,{text:t,children:Object(l.jsxs)("div",{children:[Object(l.jsx)(Me,{children:o.map((function(e,t){return Object(l.jsx)("tr",{children:e.map((function(e,t){return Object(l.jsx)("td",{className:Le,dangerouslySetInnerHTML:{__html:e}},t)}))},t)}))}),i&&0!==i.length&&Object(l.jsx)(Be,{rules:i,updateData:b})]})})]})})),Ve=Object(W.cn)("RulesHeader")(),We=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(i){a={error:i}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return c},qe=Object(p.compose)(ue.a,fe.a)(se.a),Ue=Object(f.memo)((function(e){var t=e.colIdx,n=e.title,r=e.updateData,a=We(Object(f.useState)(!0),2),o=a[0],c=a[1],i=Object(f.useCallback)((function(){r(t,-1,(function(e,t){return t.map((function(e){return e.enabled=!e.enabled,e}))})),c((function(e){return!e}))}),[r,t]);return Object(l.jsx)(qe,{label:n,className:Ve,size:"s",view:"default",onChange:i,checked:o})})),Je=Object(W.cn)("RulesTable"),Ge=Je("Column"),He=Je("Content"),Fe=(n("Rk95"),function(e){var t=e.updateData,n=e.rulesDataArr,r=e.show,a=Je({show:r});return Object(l.jsx)("div",{className:a,children:n.map((function(e){return Object(l.jsxs)("div",{className:Ge,children:[Object(l.jsx)(Ue,{colIdx:e.idx,title:e.title,updateData:t}),Object(l.jsx)("div",{className:He,children:e.data.map((function(n){return Object(l.jsx)(Ie,{rules:n.rules,idx:n.idx,colIdx:e.idx,label:n.title+" "+n.content.length,enabled:n.enabled,updateData:t,content:n.content},n.idx)}))})]},e.idx)}))})}),Qe=(n("bJMi"),function(){return Qe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Qe.apply(this,arguments)}),Xe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(i){a={error:i}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return c},Ye=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},Ke=Object(p.compose)(y.a,Z.a)(j.a),Ze=Object(p.compose)(le)(ce.a),$e=Object(p.compose)(O.a,oe.a)(h.a),et=function(e,t,n,r){var a=e.findIndex((function(e){return e.idx===t})),o=e[a],c=Qe(Qe({},o),{data:r(n,e[a].data)});return e.splice(a,1,c),Ye([],Xe(e),!1)},tt=function(e){var t=e.wizardDataWithoutSrcSetup,n=e.wizardDataWithSrcSetup,r=e.rearrangeData,a=e.begemotRulesShown,o=e.rearrangeShown,c=Object(W.cn)("RulesContent")({show:a||o}),i=Object(f.useCallback)((function(){window.location.assign(window.location+"&json_dump_responses=WIZARDRY")}),[]),s=Xe(Object(f.useState)(!1),2),u=s[0],b=s[1],d=Xe(Object(f.useState)([{idx:0,title:"Переранжирования",data:r.map((function(e){return Qe(Qe({},e),{enabled:!0})}))},{idx:1,title:"Данные источников",data:[]}]),2),p=d[0],j=d[1],h=Xe(Object(f.useState)([{idx:0,title:"Правила",data:t.map((function(e){return Qe(Qe({},e),{enabled:!0})}))},{idx:1,title:"Правила SrcSetup*",data:n.map((function(e){return Qe(Qe({},e),{enabled:!0})}))}]),2),v=h[0],y=h[1],O=Object(f.useCallback)((function(){b((function(e){return!e}))}),[]),m=v.map((function(e){return Qe(Qe({},e),{data:e.data.filter((function(e){return u||e.working}))})})),g=Object(f.useCallback)((function(e,t,n){y((function(r){return et(r,e,t,n)}))}),[]),w=Object(f.useCallback)((function(e,t,n){j((function(r){return et(r,e,t,n)}))}),[]),C=Object(f.useCallback)((function(){confirm("Перезагрузить страницу?")&&function(e,t){var n=window.location.href,r=[],a=e.filter((function(e){return!e.enabled})).map((function(e){return"&rwr=-"+e.title}));t.forEach((function(e){var t;if(e.enabled){var a=null===(t=e.rules)||void 0===t?void 0:t.filter((function(e){return e.changed})).map((function(e){var t="bool"===e.type?Number(e.value):e.value;return n=n.replace(new RegExp("("+encodeURIComponent(e.cgiParametr+"=")+".*?)(&|$)","g"),"$2"),"&rearr=".concat(e.cgiParametr,"=").concat(t)}));r=r.concat(a||[])}else r.push("&rearr=".concat(e.title,"_off"))}));var o=t.filter((function(e){return!e.enabled})).map((function(e){return"&rearr="+e.title+"_off"}));r=Ye(Ye(Ye([],Xe(r),!1),Xe(a),!1),Xe(o),!1),window.location.replace(n+r.join(""))}(v.reduce((function(e,t){return e.push.apply(e,Ye([],Xe(t.data),!1)),e}),[]),p.reduce((function(e,t){return e.push.apply(e,Ye([],Xe(t.data),!1)),e}),[]))}),[p,v]);return Object(l.jsxs)("div",{className:c,children:[Object(l.jsxs)("div",{className:x.e,children:[Object(l.jsx)(Ke,{view:"default",size:"m",checked:u,onChange:O,labelAfter:"Несработавшие правила"}),Object(l.jsx)($e,{view:"default",size:"m",onClick:C,children:"Перезадать запрос с изменениями"}),Object(l.jsx)(Ze,{view:"default",onClick:i,children:"Begemot"})]}),Object(l.jsx)(Fe,{show:a,updateData:g,rulesDataArr:m}),Object(l.jsx)(Fe,{show:o,updateData:w,rulesDataArr:p})]})},nt=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(i){a={error:i}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return c},rt=Object(p.compose)(O.a,m.a)(h.a),at=Object(g.c)({desktop:function(e){var t=e.data,n=nt(Object(f.useState)(!1),2),r=n[0],a=n[1],o=Object(f.useCallback)((function(){a(!0),fetch("https://blender.v.yandex-team.ru/request/save/",{method:"post",body:JSON.stringify(t)}).then((function(e){a(!1),e.redirected&&window.open(e.url,"_blank")})).catch((function(e){a(!1),alert(e.message)}))}),[t]);return Object(l.jsx)("div",{children:Object(l.jsx)(rt,{view:"default",size:"s",disabled:r,onClick:o,children:"Blender"})})}},{file:"depot/components/RelevanceCookie/RelevanceCookie.components/BlenderButton/index.ts"}),ot=n("2GLw"),ct="relcgi";var it=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(i){a={error:i}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return c},lt=Object(p.compose)(y.a,Z.a)(j.a),st=Object(g.c)({desktop:function(e){var t=e.param,n=e.label,r=it(Object(f.useState)(function(e){var t=Object(ot.a)();if(!t)return!1;var n=t.yp(ct);return!!n&&-1!==n.indexOf(e)}(t)),2),a=r[0],o=r[1],c=Object(f.useCallback)((function(){var e=function(e){var t,n=Object(ot.a)();if(!n)return!1;var r=(null!==(t=n.yp(ct))&&void 0!==t?t:"").split(":"),a=r.includes(e),o=a?r.filter((function(t){return t!==e})):r.concat(e);return n.yp(ct,o.join(":"),n.getExpirationDate(365)),!a}(t);o(e)}),[t]);return Object(l.jsx)(lt,{view:"default",size:"m",checked:a,onChange:c,labelAfter:n})}},{file:"depot/components/RelevanceCookie/RelevanceCookie.components/CookieTumbler/index.ts"});var ut=Object(W.cn)("HeaderContent"),ft=ut("Popup"),bt=ut("PopupArrow"),dt=(n("qJD2"),Object(p.compose)(y.a,Z.a)(j.a)),pt=function(){},jt=Object(f.memo)((function(e){var t=e.relevData,n=e.onTabToggle,r=e.tabsOpened,a=e.isVisible,o=t.qtreeData,c=t.reqId,i=t.baseSearchCount,s=t.unanswers,u=t.unanswerSourcesCount,b=t.wizardDataWithSrcSetup,d=t.wizardDataWithoutSrcSetup,p=t.rearrangeData,j=t.sbh,h=t.pruning,v=t.blenderButton,y=t.unanswerPopupData,O=t.backendsPropertiesData,m=Object(f.useCallback)((function(){return n("begemotRules")}),[n]),g=Object(f.useCallback)((function(){return n("rearrangeRules")}),[n]),w=Object(f.useCallback)((function(){return n("requestCGI")}),[n]),C=ut({visible:a}),k=(null==b?void 0:b.length)||(null==d?void 0:d.length);return Object(l.jsxs)("div",{className:C,children:[o?Object(l.jsx)($.a,{name:"QTree",value:o}):null,Object.keys(O||{}).map((function(e){return e in O?Object(l.jsx)(ae,{data:O[e],label:e},e):null})),Object(l.jsx)(at,{data:v}),Object(l.jsx)($.a,{name:"Множитель прюнинга",value:h}),Object(l.jsx)($.a,{name:"Идентификатор запроса",value:c}),Object(l.jsxs)("div",{className:x.e,children:[Object(l.jsx)($.a,{name:"Базовых поисков",value:i}),Object(l.jsx)($.a,{name:"неответов",value:s}),Object(l.jsx)($.a,{name:"неответов источников",value:u}),Object(l.jsx)(K,{visible:!1,innerContent:Object(l.jsx)("div",{className:ft,children:y.map((function(e,t){return Object(l.jsx)("div",{children:e},t)}))}),onVisibleChange:pt,trigger:"click",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,view:"default",direction:"bottom-start",hasTail:!0,children:Object(l.jsx)("div",{className:bt,children:"▼"})})]}),a&&!j&&Object(l.jsxs)(l.Fragment,{children:[k?Object(l.jsx)(dt,{view:"default",size:"m",checked:r.begemotRules,onChange:m,labelAfter:"Правила бегемота"}):null,Object(l.jsx)(dt,{view:"default",size:"m",checked:r.rearrangeRules,onChange:g,labelAfter:"Правила переранжирования"}),Object(l.jsx)(dt,{view:"default",size:"m",checked:r.requestCGI,onChange:w,labelAfter:"Request CGIs"}),Object(l.jsx)(tt,{wizardDataWithoutSrcSetup:d,wizardDataWithSrcSetup:b,rearrangeData:p,begemotRulesShown:r.begemotRules,rearrangeShown:r.rearrangeRules}),r.requestCGI&&Object(l.jsxs)("div",{className:x.e,children:[Object(l.jsx)(st,{param:"fba",label:"Включить динамические баны для запросов с ограничением видимости"}),Object(l.jsx)(st,{param:"nc",label:"Отключить кэш (задавать все запросы с nocache=da)"})]})]})]})})),ht=n("n5oa"),vt=(n("wwe9"),function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(i){a={error:i}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return c}),yt={name:"relevance-cookie"},Ot=Object(p.compose)(y.a,v.a)(j.a),mt=Object(p.compose)(O.a,m.a)(h.a),xt=function(e){var t=e.relevData,n=e.shouldShowFeedbackButton,r=t.reqId,a=Object(d.useBaobab)(yt,e.logNode,e),o=a.nextContext,c=a.BaobabProvider,i=vt(Object(f.useState)(ht.a),2),s=i[0],u=i[1];Object(f.useEffect)((function(){u(Object(ht.b)())}),[]);var b=Object(f.useCallback)((function(e){Object(ht.c)(e),u(Object(ht.b)()),window.dispatchEvent(new Event(x.b))}),[]),p=Object(f.useCallback)((function(){return b("relevanceCookie")}),[b]),j=Object(f.useCallback)((function(){window.open("https://setrace.yandex-team.ru/web/trace/".concat(r),"_blank")}),[r]),h=Object(f.useCallback)((function(){b("noCache")}),[b]),v=Object(f.useCallback)((function(){b("eventLog")}),[b]),y=Object(f.useCallback)((function(){b("noTests")}),[b]),O=Object(f.useCallback)((function(){window.open(x.a,"_blank")}),[]);return Object(l.jsx)(c,{value:o,children:Object(l.jsxs)("div",{className:x.d,children:[Object(l.jsxs)("div",{className:x.f,children:[Object(l.jsx)(Ot,{view:"default",size:"s",checked:s.relevanceCookie,onChange:p,labelAfter:"Отображение куки"}),Object(l.jsx)(mt,{view:"default",size:"s",onClick:j,children:"SETrace"}),Object(l.jsx)(mt,{view:"default",size:"s",checked:s.noCache,onClick:h,title:"Добавить в запрос параметр nocache=da",children:"NoCache"}),Object(l.jsx)(mt,{view:"default",size:"s",checked:s.eventLog,onClick:v,title:"Добавить в запрос параметр dump=eventlog",children:"Event Log"}),Object(l.jsx)(mt,{view:"default",size:"s",checked:s.noTests,onClick:y,title:"Добавить в запрос параметр no-tests=1",children:"No Tests"}),n?Object(l.jsx)(mt,{view:"default",size:"s",onClick:O,title:"Оставить фидбек/пожелания/замечания по новой куке релевантности",children:"Feedback"}):null]}),Object(l.jsx)(jt,{onTabToggle:b,tabsOpened:s,relevData:t,isVisible:s.relevanceCookie})]})})},gt=n("Bhso"),wt=n("Kp5h"),Ct=n("/9jV"),kt=function(){return kt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},kt.apply(this,arguments)},Dt=Object(c.b)({desktop:function(e){var t=Object(wt.a)(),n=Object(f.useCallback)((function(){if(gt.a){var e;try{e=JSON.parse(window.localStorage.getItem(x.c)||"{}")}catch(n){return}t(Ct.a.setInternalLayoutView(Boolean(null==e?void 0:e.relevanceCookie)))}}),[t]);return Object(b.a)(x.b,n),n(),Object(l.jsx)(xt,kt({},e))}},{file:"fiji/images-app/src/features/RelevanceCookie/RelevanceCookie.components/Wizard/index.ts"}),St=function(){return St=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},St.apply(this,arguments)},Pt=Object(c.b)({desktop:function(){var e=u((function(e){return e}));return e?Object(l.jsx)(Dt,St({},e)):null}},{file:"fiji/images-app/src/features/RelevanceCookie/index.ts"}),Rt=Object(i.a)({featureName:"RelevanceCookie"})(Pt)},bJMi:function(e,t,n){},f3eo:function(e,t,n){var r=function(e,t,n){if(void 0===t){var a=r.get(e);return a?decodeURIComponent(a):null}r.set(e,encodeURIComponent(t),n)};function a(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16)}))}function o(e){return decodeURIComponent(e)}r.get=function(e){return this.getAll()[e]},r.getAll=function(){for(var e=this._readCookie(),t=e?e.split("; "):[],n={},r=0;r<t.length;r++){var a=t[r].split("="),o=a[0],c=a.slice(1).join("=");'"'===c.charAt(0)&&(c=c.slice(1,-1)),n[o]=c}return n},r.set=function(e,t,n){var r,a;n||(n={}),"number"==typeof(r=n.expires)&&(r=new Date(Date.now()+24*r*60*60*1e3)),a=[e,"=",t,r&&"; expires="+r.toUTCString(),n.path&&"; path="+n.path,n.domain&&"; domain="+n.domain,n.samesite&&"; samesite="+n.samesite,n.secure?"; secure":""].join(""),this._writeCookie(a)},r.remove=function(e){this.set(e,"",{expires:-1})},r._readCookie=function(){try{return document.cookie}catch(e){return""}},r._writeCookie=function(e){try{document.cookie=e}catch(t){}};var c=function(e,t,n){this.domain=e,this.ypParams=t||{expires:new Date("Tue Jan 1 00:00:00 2038"),domain:this.domain,path:"/"},this.ysParams=n||{domain:this.domain,path:"/"}};c.prototype={getExpirationDate:function(e){return Math.round(Date.now()/1e3+24*e*60*60)},ypRead:function(){for(var e=r("yp"),t=e?e.split("#"):[],n=new Date/1e3,a={},c=0,i=t.length;c<i;c++){var l=t[c].split("."),s=l[0],u=l[1],f=l.slice(2).join(".");s>n&&(a[u]={value:o(f),expires:s})}return a},ypWrite:function(e){for(var t,n=[],o=0,c=Object.keys(e),i=c.length;o<i;o++)t=e[c[o]],n.push([t.expires,c[o],!1===t.encode?t.value:a(t.value)].join("."));r.set("yp",n.join("#"),this.ypParams)},ypRemove:function(e){var t=this.ypRead();e&&t[e]&&(delete t[e],this.ypWrite(t))},yp:function(e,t,n){var r={};"object"==typeof e&&(e=(r=e).name,t=r.value,n=r.expires);var a=this.ypRead(),o=a[e];return void 0===t?o&&o.value:(o||(o={}),o.value=t,o.expires=n||o.expires||this.getExpirationDate(7),o.encode=r.encode,a[e]=o,this.ypWrite(a))},ypBit:function(e,t,n,r){var a=this.yp(e),o=a?a.split(""):[];if(void 0===n)return"1"===o[t];for(o[t]=n?"1":"0";t--;)o[t]||(o[t]="0");this.yp(e,o.join(""),r)},ysRead:function(){var e=r("ys"),t=e?e.split("#"):[],n={};return t.forEach((function(e){var t=e.split("."),r=t[0],a=t.slice(1).join(".");n[r]=o(a)})),n},ysWrite:function(e){for(var t=[],n=0,o=Object.keys(e),c=o.length;n<c;n++)t.push([o[n],a(e[o[n]])].join("."));r.set("ys",t.join("#"),this.ysParams)},ys:function(e,t){var n=this.ysRead();return t?(n[e]=t,this.ysWrite(n)):n[e]}},e.exports={cookies:r,yCookies:c}},lJQW:function(e,t,n){},qJD2:function(e,t,n){},wwe9:function(e,t,n){}}]);