<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Push Demo</title>
</head>
<body>
    <button id="notifyBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</button>
    <p id="n"></p>
</body>
</html>
<script>
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É
        document.getElementById("n").innerText = Notification.permission
        let permission = Notification.requestPermission();
    if ('Notification' in window && 'serviceWorker' in navigator) {

    // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker
    navigator.serviceWorker.register('/static/js/sw.js').then(reg => {
        console.log('Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω', reg);
    });
    new Notification('–¢–µ—Å—Ç üîî', {
    body: '–ï—Å–ª–∏ —ç—Ç–æ –≤–∏–¥–Ω–æ ‚Äî –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç'
});
    document.getElementById('notifyBtn').addEventListener('click', async () => {
        // –ó–∞–ø—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        alert(Notification.permission)

        console.log(Notification.permission)
        Notification.requestPermission()
        let permission = await Notification.requestPermission();
        if (permission !== 'granted') return alert('–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–µ –ø–æ–ª—É—á–µ–Ω–æ');

        // –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Service Worker
        navigator.serviceWorker.ready.then(registration => {
            registration.showNotification('–ü—Ä–∏–≤–µ—Ç!', {
                body: '–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ',
                icon: 'icon.png'
            });
        });
    });

    } else {
    alert('–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏–ª–∏ Service Worker –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —ç—Ç–∏–º –±—Ä–∞—É–∑–µ—Ä–æ–º');
    }
</script>